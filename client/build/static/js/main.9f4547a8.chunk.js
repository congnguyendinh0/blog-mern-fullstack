(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),l=a(5),u=a.n(l),i=a(9),s=a(7),m=a(142),h=a(144),f=a(110),d=a(12),p=Object(f.a)({root:{flexGrow:1}}),E=function(e){var t=e.user,a=(e.setUser,p()),n=t?r.a.createElement("div",null,r.a.createElement(d.b,{to:"/"},r.a.createElement(m.a,null,"Home")),r.a.createElement(d.b,{to:"/newpost"},r.a.createElement(m.a,null,"Add")),r.a.createElement(d.b,{to:"/settings"},r.a.createElement(m.a,null,"Setting")),r.a.createElement(d.b,{to:"/profile/".concat(t._id)},r.a.createElement(m.a,null,"Profile")),r.a.createElement(m.a,{onClick:function(){localStorage.removeItem("token"),setTimeout((function(){window.location.reload()}),500)}},"Logout")):r.a.createElement("div",null,r.a.createElement(d.b,{to:"/login"},r.a.createElement(m.a,null,"Login")),r.a.createElement(d.b,{to:"/register"},r.a.createElement(m.a,null,"Register")));return r.a.createElement("div",{className:a.root},r.a.createElement(h.a,{position:"static"},r.a.createElement("div",null,n)))},g=a(35),v=a(161),b=a(160),O=a(145),j=a(10),w=a.n(j),x=Object(f.a)({root:{flexGrow:1}});function k(){var e=x(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),h=Object(s.a)(l,2),f=h[0],d=h[1],p=Object(n.useState)(""),E=Object(s.a)(p,2),j=E[0],k=E[1];Object(n.useEffect)((function(){}),[j]);var S=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(c,f),e.next=3,w()({method:"POST",url:"http://localhost:5000/api/auth",data:{email:c,password:f}}).then((function(e){console.log(e),localStorage.setItem("token",e.data.token),k(!0)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return j?r.a.createElement(g.a,{to:"/"}):r.a.createElement("div",{className:e.root},r.a.createElement("h2",null,"Login"),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"email"},"Email"),r.a.createElement(O.a,{id:"email",type:"email",onChange:function(e){return o(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"password"},"Password"),r.a.createElement(O.a,{id:"password",type:"password",autoComplete:"current-password",onChange:function(e){return d(e.target.value)}})),r.a.createElement(m.a,{variant:"contained",color:"primary",size:"medium",onClick:S},"login"))}var S=Object(f.a)({root:{flexGrow:1}});function y(){var e=S(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),h=Object(s.a)(l,2),f=h[0],d=h[1],p=Object(n.useState)(""),E=Object(s.a)(p,2),j=E[0],x=E[1],k=Object(n.useState)(""),y=Object(s.a)(k,2),C=y[0],_=y[1],I=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(c,f,j),e.next=3,w()({method:"POST",url:"http://localhost:5000/api/users",data:{email:f,name:c,password:j}}).then((function(e){console.log(e),localStorage.setItem("token",e.data.token),_(!0)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return C?r.a.createElement(g.a,{to:"/"}):r.a.createElement("div",{className:e.root},r.a.createElement("h2",null,"Register"),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"name"},"Name"),r.a.createElement(O.a,{id:"name",type:"text",autoComplete:"current-name",onChange:function(e){return o(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"email"},"Email"),r.a.createElement(O.a,{id:"email",type:"email",onChange:function(e){return d(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"password"},"Password"),r.a.createElement(O.a,{id:"password",type:"password",autoComplete:"current-password",onChange:function(e){return x(e.target.value)}})),r.a.createElement(m.a,{variant:"contained",color:"primary",size:"medium",onClick:I},"register"))}var C=a(156),_=Object(f.a)({root:{flexGrow:1}});function I(){var e=_(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),h=Object(s.a)(l,2),f=h[0],d=h[1],p=Object(n.useState)(""),E=Object(s.a)(p,2),v=E[0],b=E[1],O=Object(n.useState)(""),j=Object(s.a)(O,2),x=j[0],k=j[1],S=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(f,v,x),[],t=f.replace(/ /g,"").split(","),e.next=5,w()({method:"POST",url:"http://localhost:5000/api/posts",headers:{"x-auth-token":"".concat(localStorage.getItem("token"))},data:{text:x,tags:t,title:v}}).then((function(e){console.log(e),o(!0)})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c?r.a.createElement(g.a,{to:"/"}):r.a.createElement("div",{className:e.root},r.a.createElement("h2",null,"Create New Post"),r.a.createElement(C.a,{fullWidth:!0,label:"title",variant:"outlined",onChange:function(e){return b(e.target.value)}}),r.a.createElement(C.a,{multiline:!0,rows:3,fullWidth:!0,label:"text",variant:"outlined",onChange:function(e){return k(e.target.value)}}),r.a.createElement(C.a,{fullWidth:!0,label:"tags",variant:"outlined",onChange:function(e){return d(e.target.value)}}),r.a.createElement(m.a,{variant:"contained",color:"primary",size:"medium",onClick:S},"send"))}var T=Object(f.a)({root:{flexGrow:1,border:1}});function P(){var e=T(),t=Object(n.useState)("asodjaoisdjoias"),a=Object(s.a)(t,2),c=a[0],o=a[1],l=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(c),e.next=3,w()({method:"POST",url:"http://localhost:5000/api/posts/comment/5db1087003770f0d21fe8b6d",data:{text:c},headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){console.log(e),o("")})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:e.root},r.a.createElement(C.a,{id:"text",type:"text",value:c,onChange:function(e){return o(e.target.value)}}),r.a.createElement(m.a,{variant:"contained",color:"primary",size:"medium",onClick:l},"post"))}var G=a(150),W=a(147),z=a(159),F=a(149),L=a(148),N=a(146),H=a(72),U=a.n(H),V=a(43),B=a.n(V),M=a(49),A=a.n(M),D=a(158),R=a(151);function J(e){var t=e.comment,a=e.post,c=e.fetchPost,o=e.user;Object(n.useEffect)((function(){}),[]);var l=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()({method:"DELETE",url:"http://localhost:5000/api/posts/comment/".concat(a._id,"/").concat(t),headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){console.log(e),c()})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var s=function(e,t){return(t||e)&&t._id==e.user?r.a.createElement(N.a,{onClick:function(){return l(e._id)}},r.a.createElement(A.a,null)):""}(t,o);return r.a.createElement(W.a,null,r.a.createElement(z.a,{avatar:r.a.createElement(L.a,{src:t.user.avatar}),action:s,title:t.text,subheader:r.a.createElement(d.b,{to:"/profile/".concat(t.user._id)},t.user.name)}),r.a.createElement(F.a,null,r.a.createElement("p",null,t.text)))}var Y=Object(G.a)({tag:{flex:"0 1 calc(33% 3px)",margin:"3px"},tags:{display:"flex",flexFlow:"row wrap",margin:"1em auto"}});function $(e){return{__html:"".concat(e.text)}}function q(e){var t=e.id,a=e.user,c=Object(n.useState)(null),o=Object(s.a)(c,2),l=o[0],h=o[1],f=Object(n.useState)(""),p=Object(s.a)(f,2),E=p[0],j=p[1],x=Object(n.useState)(!1),k=Object(s.a)(x,2),S=k[0],y=k[1],C=Object(n.useState)(!1),_=Object(s.a)(C,2),I=_[0],T=_[1],P=Y();Object(n.useEffect)((function(){G()}),[]),Object(n.useEffect)((function(){}),[l]),Object(n.useEffect)((function(){}),[S]),Object(n.useEffect)((function(){}),[I]);var G=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()({method:"GET",url:"http://localhost:5000/api/posts/".concat(t),headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){console.log(e),h(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()({method:"DELETE",url:"http://localhost:5000/api/posts/".concat(t),headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){y(!0),console.log(e)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()({method:"GET",url:" http://localhost:5000/api/posts/".concat(t),headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){T(!0),console.log(e)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var M=function(e,t){return e||t?t&&e&&e.user===t._id?r.a.createElement("div",null,r.a.createElement(N.a,{onClick:function(){return H(e._id)}},r.a.createElement(A.a,null)),r.a.createElement(d.b,{to:"/editpost/".concat(e._id)},r.a.createElement(N.a,{onClick:function(){return V(e._id)}},r.a.createElement(U.a,null)))):void 0:""}(l,a),q=l?r.a.createElement("div",null,r.a.createElement(W.a,null,r.a.createElement(z.a,{avatar:r.a.createElement(L.a,{src:l.avatar}),action:r.a.createElement("div",null,r.a.createElement(N.a,{onClick:function(){return console.log("clicked")}},r.a.createElement(B.a,null)),M),title:l.title,subheader:r.a.createElement(d.b,{to:"/profile/".concat(l.user)},l.name)}),r.a.createElement(F.a,null,r.a.createElement("div",{dangerouslySetInnerHTML:$(l)}),l.tags.map((function(e){return r.a.createElement(D.a,{className:P.tag,key:e,label:e})}))))):r.a.createElement("div",null,r.a.createElement(R.a,null)),K=l?r.a.createElement("div",null,l.comments.map((function(e){return r.a.createElement(J,{comment:e,post:l,fetchPost:G,user:a})}))):r.a.createElement("div",null,r.a.createElement("h1",null,"Loading . . .")),Q=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(E),e.next=3,w()({method:"POST",url:"http://localhost:5000/api/posts/comment/".concat(l._id),data:{text:E},headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){console.log(e),G()})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=l?r.a.createElement("div",null,r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"text"},"comment"),r.a.createElement(O.a,{id:"text",type:"text",onChange:function(e){return j(e.target.value)}})),r.a.createElement(m.a,{variant:"contained",color:"primary",size:"medium",onClick:Q},"post")):r.a.createElement("div",null,r.a.createElement("h1",null,"Loading . . ."));return S?r.a.createElement(g.a,{to:"/"}):r.a.createElement("div",null,q,K,X)}var K=a(157),Q=a(154),X=a(152),Z=a(153);function ee(e){return{__html:"".concat(e.text)}}function te(e){var t=e.post,a=e.user,c=Object(n.useState)(!1),o=Object(s.a)(c,2),l=o[0],h=o[1],f=Object(n.useState)(null),p=Object(s.a)(f,2),E=p[0],g=p[1];Object(n.useEffect)((function(){t&&g(t.likes.length)}),[]),Object(n.useEffect)((function(){v()}),[l,a]);var v=function(){var e=Object(i.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&t&&(n=t.likes.forEach((function(e){e.user===a._id&&h(!0)})),console.log(n));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("like"),e.next=3,w()({method:"PUT",url:"http://localhost:5000/api/posts/like/".concat(t._id),headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){h(!0),g(E+1),console.log(e)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("dislike"),e.next=3,w()({method:"PUT",url:"http://localhost:5000/api/posts/unlike/".concat(t._id),headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){h(!1),g(E-1),console.log(e)})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=l?r.a.createElement("div",null,r.a.createElement(X.a,{badgeContent:E,color:"primary"},r.a.createElement(N.a,{onClick:O},r.a.createElement(B.a,{color:"secondary"})))):r.a.createElement("div",null,r.a.createElement(X.a,{badgeContent:E,color:"primary"},r.a.createElement(N.a,{onClick:b},r.a.createElement(B.a,{color:"primary"}))));return r.a.createElement("div",null,r.a.createElement(W.a,null,r.a.createElement(z.a,{avatar:r.a.createElement(L.a,{src:t.user.avatar}),action:j,title:t.title,subheader:r.a.createElement(d.b,{to:"/profile/".concat(t.user._id)},t.user.name)}),r.a.createElement(F.a,null,r.a.createElement("div",{dangerouslySetInnerHTML:ee(t)})),r.a.createElement(Z.a,null,r.a.createElement(d.b,{to:"/posts/".concat(t._id)},r.a.createElement(m.a,null,"Read more!")))))}var ae=Object(G.a)({});function ne(e){ae();var t=e.user,a=Object(n.useState)(1),c=Object(s.a)(a,2),o=c[0],l=c[1],m=Object(n.useState)(null),h=Object(s.a)(m,2),f=h[0],d=h[1],p=Object(n.useState)(null),E=Object(s.a)(p,2),g=E[0],v=E[1],b=Object(n.useState)(null),O=Object(s.a)(b,2),j=O[0],x=O[1],k=Object(n.useState)(null),S=Object(s.a)(k,2),y=S[0],C=S[1];Object(n.useEffect)((function(){return I(),function(){console.log("clear home")}}),[]),Object(n.useEffect)((function(){g&&T()}),[g]),Object(n.useEffect)((function(){_()}),[t]);var _=function(){var e=Object(i.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(a=[],t.follow.forEach(function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n="http://localhost:5000/api/posts/user/".concat(t),e.next=4,w()({method:"GET",url:n,headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){console.log(e),e.data.forEach(function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.push(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C(a));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()({method:"GET",url:"http://localhost:5000/api/posts",headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){console.log(e),d(e.data)})).catch((function(e){console.log(e)}));case 2:return e.next=4,w()({method:"GET",url:"http://localhost:5000/api/posts/tags",headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){console.log(e.data),x(e.data)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}},a="http://localhost:5000/api/posts/getByTag?tag=".concat(g),console.log(g,60,t),e.next=5,w()({method:"GET",url:a,headers:t}).then((function(e){console.log(e.data),d(e.data)})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=1===o&&f?r.a.createElement("div",null,r.a.createElement("h1",null,"GLOBAL"),f.map((function(e){return r.a.createElement(te,{post:e,key:e._id,user:t})}))):r.a.createElement("div",null),G=0===o&&y?r.a.createElement("div",null,y.map((function(e){return r.a.createElement(te,{post:e,key:e._id,user:t})}))):r.a.createElement("div",null),W=j?r.a.createElement("div",null,j.map((function(e){return r.a.createElement(D.a,{key:e,label:e,onClick:function(){return v(e)}})}))):r.a.createElement("div",null);return r.a.createElement("div",null,r.a.createElement("div",null,W),r.a.createElement(K.a,{value:o,onChange:function(e,t){l(t)}},r.a.createElement(Q.a,{value:0,label:"Personal"}),r.a.createElement(Q.a,{value:1,label:"Global"})),P,G)}var re=Object(f.a)({root:{flexGrow:1}});function ce(){var e=re(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),h=Object(s.a)(l,2),f=h[0],d=h[1],p=Object(n.useState)(""),E=Object(s.a)(p,2),j=E[0],x=E[1],k=Object(n.useState)(""),S=Object(s.a)(k,2),y=S[0],C=S[1],_=Object(n.useState)(""),I=Object(s.a)(_,2),T=I[0],P=I[1],G=Object(n.useState)(""),W=Object(s.a)(G,2),z=W[0],F=W[1],L=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()({method:"PUT",url:"http://localhost:5000/api/auth/settings",headers:{"x-auth-token":"".concat(localStorage.getItem("token"))},data:{email:c,password:f,bio:T,name:y,avatar:j}}).then((function(e){console.log(e),F(!0)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return z?r.a.createElement(g.a,{to:"/"}):r.a.createElement("div",{className:e.root},r.a.createElement("h2",null,"Settings"),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"name"},"Name"),r.a.createElement(O.a,{id:"name",type:"text",onChange:function(e){return C(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"email"},"Email"),r.a.createElement(O.a,{id:"email",type:"email",onChange:function(e){return o(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"password"},"Password"),r.a.createElement(O.a,{id:"password",type:"password",autoComplete:"current-password",onChange:function(e){return d(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"name"},"Avatar"),r.a.createElement(O.a,{id:"avatar",type:"text",onChange:function(e){return x(e.target.value)}})),r.a.createElement(v.a,{margin:"normal",fullWidth:!0},r.a.createElement(b.a,{htmlFor:"bio"},"Bio"),r.a.createElement(O.a,{id:"bio",type:"text",onChange:function(e){return P(e.target.value)}})),r.a.createElement(m.a,{variant:"contained",color:"primary",size:"medium",onClick:L},"save"))}var oe=Object(f.a)({root:{flexGrow:1}});function le(){var e=oe(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),h=Object(s.a)(l,2),f=h[0],d=h[1],p=Object(n.useState)(""),E=Object(s.a)(p,2),v=E[0],b=E[1],O=Object(n.useState)(""),j=Object(s.a)(O,2),x=j[0],k=j[1],S=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(f,v,x),[],t=f.replace(/ /g,"").split(","),a=window.location.href,n=a.indexOf("editpost/")+9,r=a.substring(n,a.length),e.next=6,w()({method:"PUT",url:" http://localhost:5000/api/posts/edit/".concat(r),headers:{"x-auth-token":"".concat(localStorage.getItem("token"))},data:{text:x,tags:t,title:v}}).then((function(e){console.log(e),o(!0)})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c?r.a.createElement(g.a,{to:"/"}):r.a.createElement("div",{className:e.root},r.a.createElement("h2",null,"Edit Post"),r.a.createElement(C.a,{fullWidth:!0,label:"title",variant:"outlined",onChange:function(e){return b(e.target.value)}}),r.a.createElement(C.a,{multiline:!0,rows:3,fullWidth:!0,label:"text",variant:"outlined",onChange:function(e){return k(e.target.value)}}),r.a.createElement(C.a,{fullWidth:!0,label:"tags",variant:"outlined",onChange:function(e){return d(e.target.value)}}),r.a.createElement(m.a,{variant:"contained",color:"primary",size:"medium",onClick:S},"send"))}var ue=a(155);function ie(e){var t=e.authUser,a=e.configAuth,c=Object(n.useState)(1),o=Object(s.a)(c,2),l=o[0],m=o[1],h=Object(n.useState)(null),f=Object(s.a)(h,2),d=f[0],p=f[1],E=Object(n.useState)(null),g=Object(s.a)(E,2),v=g[0],b=g[1],O=Object(n.useState)(null),j=Object(s.a)(O,2),x=j[0],k=j[1],S=Object(n.useState)(null),y=Object(s.a)(S,2),C=y[0],_=y[1],I=Object(n.useState)(!1),T=Object(s.a)(I,2),P=T[0],G=T[1];Object(n.useEffect)((function(){H()}),[]),Object(n.useEffect)((function(){F()}),[x]),Object(n.useEffect)((function(){}),[P]);var F=function(){t&&x&&(t.follow.includes(x._id)?G(!0):G(!1))},H=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,a=t.indexOf("profile/")+8,n=t.substring(a,t.length),_(n),e.next=4,w()({method:"GET",url:"http://localhost:5000/api/users/user/".concat(n),headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){console.log(e),B(e)})).catch((function(e){console.log(e)}));case 4:return e.next=6,w()({method:"GET",url:"http://localhost:5000/api/posts/user/".concat(n),headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){p(e.data)})).catch((function(e){console.log(e)}));case 6:return e.next=8,w()({method:"GET",url:"http://localhost:5000/api/posts/likedposts/".concat(n),headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){b(e.data)})).catch((function(e){console.log(e)}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()({method:"POST",url:"http://localhost:5000/api/users/follow/".concat(C),headers:{"x-auth-token":"".concat(localStorage.getItem("token"))},data:{userid:t._id}}).then((function(e){console.log(e),G(!0),a()})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()({method:"DELETE",url:"http://localhost:5000/api/users/unfollow/".concat(C),headers:{"x-auth-token":"".concat(localStorage.getItem("token"))},data:{userid:t._id}}).then((function(e){console.log(e),G(!1),a()})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e){k({_id:e.data._id,avatar:e.data.avatar,name:e.data.name,follow:e.data.follow,bio:e.data.bio})},M=P?r.a.createElement(N.a,{onClick:V,color:"secondary"},r.a.createElement(ue.a,null,"         ",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},r.a.createElement("path",{d:"M10 8c1.66 0 2.99-1.34 2.99-3S11.66 2 10 2 7 3.34 7 5s1.34 3 3 3zm-6 2V8h2V6H4V4H2v2H0v2h2v2h2zm6 0c-2.33 0-7 1.17-7 3.5V16h14v-2.5c0-2.33-4.67-3.5-7-3.5z"})),"        ")):r.a.createElement(N.a,{onClick:U,color:"primary"},r.a.createElement(ue.a,null,"         ",r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},r.a.createElement("path",{d:"M10 8c1.66 0 2.99-1.34 2.99-3S11.66 2 10 2 7 3.34 7 5s1.34 3 3 3zm-6 2V8h2V6H4V4H2v2H0v2h2v2h2zm6 0c-2.33 0-7 1.17-7 3.5V16h14v-2.5c0-2.33-4.67-3.5-7-3.5z"})),"        ")),A=x?r.a.createElement("div",null,r.a.createElement(W.a,null,r.a.createElement(z.a,{subheader:x.bio,avatar:r.a.createElement(L.a,{src:x.avatar}),title:x.name,action:r.a.createElement("div",null,M)}))):"",D=1===l&&d?r.a.createElement("div",null,r.a.createElement("h1",null,"My Posts"),d.map((function(e){return r.a.createElement(te,{post:e,key:e._id,user:x})}))):"",R=0===l&&v?r.a.createElement("div",null,r.a.createElement("h1",null,"YO"),v.map((function(e){return r.a.createElement(te,{post:e,key:e._id,user:x})}))):"";return r.a.createElement("div",null,r.a.createElement("div",null,A),r.a.createElement(K.a,{value:l,onChange:function(e,t){m(t)}},r.a.createElement(Q.a,{value:0,label:"My Favorite"}),r.a.createElement(Q.a,{value:1,label:"My Posts"})),D,R)}var se=Object(f.a)({root:{}}),me=function(){se();var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(s.a)(o,2),m=(l[0],l[1]);Object(n.useEffect)((function(){h()}),[]);var h=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()({method:"GET",url:"http://localhost:5000/api/auth",headers:{"x-auth-token":"".concat(localStorage.getItem("token"))}}).then((function(e){console.log(e),f(e),m(!0)})).catch((function(e){console.log(e),m(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(e){c({_id:e.data._id,name:e.data.name,email:e.data.email,avatar:e.data.avatar,follow:e.data.follow})};return r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement(E,{user:a}),r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/",render:function(){return r.a.createElement(ne,{user:a,setUser:c})}}),r.a.createElement(g.b,{path:"/login",component:k}),r.a.createElement(g.b,{path:"/settings",component:ce}),r.a.createElement(g.b,{path:"/register",component:y}),r.a.createElement(g.b,{path:"/newpost",component:I}),r.a.createElement(g.b,{path:"/postcomment",component:P}),r.a.createElement(g.b,{path:"/posts/:id",render:function(e){var t=e.match;return r.a.createElement(q,{id:t.params.id,user:a})}}),r.a.createElement(g.b,{path:"/profile/:id",render:function(e){var t=e.match;return r.a.createElement(ie,{authUser:a,id:t.params.id,configAuth:h})}}),r.a.createElement(g.b,{path:"/editpost/:id",render:function(e){var t=e.match;return r.a.createElement(le,{id:t.params.id})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(me,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},80:function(e,t,a){e.exports=a(109)}},[[80,1,2]]]);
//# sourceMappingURL=main.9f4547a8.chunk.js.map